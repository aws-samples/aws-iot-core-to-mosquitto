{"version":3,"sources":["../../src/__tests__/index.test.js"],"names":["jest","mock","clearAllMocks","not","toThrow","logger","error","toHaveBeenCalled","mockedMqttClient","mqtt","MqttClient","undefined","new_connection","mockImplementation","Error"],"mappings":";;AAIA;;AACA;;AACA;;AACA;;AACA;;;;AARA;AACA;AAEA;AAOAA,cAAKC,IAAL,CAAU,SAAV;;AACAD,cAAKC,IAAL,CAAU,uBAAV;;AAEA,uBAAS,wCAAT,EAAmD,MAAM;AACvD,0BAAU,MAAM;AACdD,kBAAKE,aAAL;AACD,GAFD;AAGA,mBAAG,wDAAH,EAA6D,YAAY;AACvE,yBAAO,MAAM;AACX;AACD,KAFD,EAEGC,GAFH,CAEOC,OAFP;AAGA,yBAAOC,uBAAOC,KAAd,EAAqBH,GAArB,CAAyBI,gBAAzB;AACD,GALD;AAMA,mBAAG,oCAAH,EAAyC,YAAY;AACnD,UAAMC,gBAAgB,GAAGC,uBAAKC,UAA9B;AACA,gCAAiBC,SAAjB;AACAH,IAAAA,gBAAgB,GAAGI,cAAnB,CAAkCC,kBAAlC,CAAqD,MAAM;AACzD,YAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD,KAFD;AAGA,yBAAO,MAAM;AACX;AACD,KAFD,EAEGX,GAFH,CAEOC,OAFP;AAGA,yBAAOC,uBAAOC,KAAd,EAAqBC,gBAArB;AACD,GAVD;AAWD,CArBD","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//  SPDX-License-Identifier: MIT-0\n\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { jest, describe, expect, it, beforeAll } from \"@jest/globals\";\nimport { mqtt } from \"aws-iot-device-sdk-v2\";\nimport logger from \"../utils/winstonLogger\";\nimport { setIotConnection } from \"../services/iotv2\";\nimport start from \"../index\";\n\njest.mock(\"winston\");\njest.mock(\"aws-iot-device-sdk-v2\");\n\ndescribe(\"unit tests for the main function start\", () => {\n  beforeAll(() => {\n    jest.clearAllMocks();\n  });\n  it(\"Should createSubscription configuration without errors\", async () => {\n    expect(() => {\n      start();\n    }).not.toThrow();\n    expect(logger.error).not.toHaveBeenCalled();\n  });\n  it(\"Should handle errors and not break\", async () => {\n    const mockedMqttClient = mqtt.MqttClient;\n    setIotConnection(undefined);\n    mockedMqttClient().new_connection.mockImplementation(() => {\n      throw new Error(\"Unable to create connection\");\n    });\n    expect(() => {\n      start();\n    }).not.toThrow();\n    expect(logger.error).toHaveBeenCalled();\n  });\n});\n"],"file":"index.test.js"}